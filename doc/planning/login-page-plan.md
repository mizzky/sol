TL;DR
ログインページの実装計画。フロントエンドにログインUIを追加し、APIクライアントと認証ストアを実装して統合する。最後にUXの磨き込みと検証を行う。

Steps
- UI実装 (`frontend/app/login/page.tsx`)
  - メールアドレス／パスワードのフォーム、バリデーション、送信ボタン、読み込みインジケータ、エラーメッセージ表示を実装。
  - フォーム送信時にAPIクライアントを呼び出し、成功時は認証ストアへトークンを渡してリダイレクト。
- APIクライアント (`frontend/lib/api.ts`)
  - `login(email, password)` を追加。バックエンドのログインエンドポイントへPOSTし、成功時にアクセストークン（と必要ならユーザ情報）を返す。
  - エラー時は呼び出し元で扱えるように明確なエラーオブジェクトを返す。
- Authストア (`frontend/store/useAuthStore.ts`)
  - `login()`, `logout()`, `isAuthenticated`, `user` の状態管理を実装。
  - トークンの一時保管と必要に応じた永続化（localStorageは実装の優先度低め）。
  - ページ間での認証状態維持と、必要なヘッダ設定を提供するユーティリティを追加。
- 統合
  - ログイン成功後にトップページ(`/`)へリダイレクト。
  - 保護されたルートへのリダイレクト（未認証時）を確認。
- UX磨き込み
  - フォームのアクセシビリティ、フォーカス管理、フレンドリーなエラーメッセージ、ロード／失敗状態の視覚フィードバックを追加。
  - オプション: 「パスワードを表示」トグル、Remember me チェックボックス。

Verification
- 開発サーバ起動:
  - フロントエンド: `cd frontend && npm run dev`
  - バックエンド: `cd backend && air`（開発環境に応じて）
- 手動確認:
  - `/login` にアクセスし、正常ログイン・認証失敗・ネットワークエラー等の挙動を確認。
  - ログイン後に `/` へリダイレクトされること、保護ルートが未認証時にリダイレクトされることを検証。
- オプションのテスト:
  - APIクライアントのユニットテスト（モック化）
  - 認証ストアのユニットテスト
  - E2Eテスト（Playwright/ Cypress）でログインフローを検証

Decisions
- トークンの保存:
  - 当面はセッション内状態で実装し、localStorage 保存は優先度低めで後追い検討とする（セキュリティ要件に応じて httpOnly cookie に移行予定）。
- リダイレクト先:
  - ログイン成功時は `/` にリダイレクト。
- エラーハンドリング:
  - ユーザ向けには簡潔で具体的なエラーメッセージを表示し、詳細エラーは開発ログに残す。

作成日: 2026-02-16

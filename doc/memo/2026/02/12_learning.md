# 2026-02-12 学習記録

## 学習項目
- sqlc を用いた CRUD クエリの追加と生成フロー確認
- 部分更新 (PATCH) を SQL の COALESCE で実装する設計（Go 側はポインタで受ける）
- テスト用モックが db.Querier インターフェースを満たす必要がある点（sqlc 生成の関数追加時に注意）

## 気づき・反省
- sqlc でクエリを増やした場合、既存のテスト用フェイク（FakeQuerier など）に新しいメソッドを追加し忘れるとビルドエラーになる。
- `sku` カラムが NOT NULL/UNIQUE の場合、API 設計で必須にするか DB 側でデフォルト生成ルールを用意するか方針を早めに決める必要がある。
- 部分更新では SQL 側で `COALESCE` を使いつつ、Go 側で `nil` を渡すことで未送信フィールドを維持できるが、ptype 設計（ポインタ、sql.NullString 等）を慎重に行うこと。

## 次回の学習予定
- `backend/handler/product.go` とテストを TDD で実装し、エラーコード（409 等）の扱いを明確にする。
- ルーティングに `auth.AdminOnly` を適用し、フロント側の呼び出しフローを合わせる。

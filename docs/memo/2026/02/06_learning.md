# 学習記録 - 2026年2月6日

## Ginフレームワークのルート登録
- **テスト内でのルート登録の必要性**:
  - テスト用の `gin.Engine` インスタンスは独立しており、ルートを手動で登録する必要がある。
  - `router.GET()` を明示的に呼び出さないと、リクエストが `404 Not Found` になる。

- **本番環境でのルート登録**:
  - `routes.SetupRoutes` 関数でルートを一括登録。
  - `main.go` で `SetupRoutes` を呼び出し、サーバー起動時にルートを登録する。

## sql.NullString の変換
- **問題点**:
  - `sql.NullString` をそのままJSONに変換すると `{String, Valid}` 形式になり、API仕様と不一致。
- **解決方法**:
  - `sql.NullString` を `*string` に変換してレスポンスに含める。
  - 実装側で変換処理を追加し、テストが期待する形式に整合。

## TDDの実践
- **正常系と異常系のテスト**:
  - 正常系: カテゴリー一覧取得のレスポンスが期待通りであることを確認。
  - 異常系: DB接続エラー時に適切なエラーレスポンスが返ることを確認。
- **テスト失敗からの改良**:
  - 404エラーの原因を特定し、ルート登録を追加。
  - `sql.NullString` の変換を実装し、テストを通過。
